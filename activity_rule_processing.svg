<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="493px" preserveAspectRatio="none" style="width:2336px;height:493px;" version="1.1" viewBox="0 0 2336 493" width="2336px" zoomAndPan="magnify"><defs><filter height="300%" id="fd0i3ubazv76u" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><ellipse cx="1184" cy="20" fill="#000000" filter="url(#fd0i3ubazv76u)" rx="10" ry="10" style="stroke: none; stroke-width: 1.0;"/><rect fill="#FEFECE" filter="url(#fd0i3ubazv76u)" height="36.3441" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="211" x="1078.5" y="50"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="191" x="1088.5" y="72.8281">onStatusChange(device,key,value)</text><polygon fill="#FEFECE" filter="url(#fd0i3ubazv76u)" points="137,106.3441,352,106.3441,364,118.3441,352,130.3441,137,130.3441,125,118.3441,137,106.3441" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="19" x="248.5" y="142.103">Ava</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="215" x="137" y="122.6121">device.type == "ava" &amp;&amp; key=="command"</text><rect fill="#FEFECE" filter="url(#fd0i3ubazv76u)" height="36.3441" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="109" x="190" y="163.603"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="89" x="200" y="186.4311">parse utterance</text><polygon fill="#FEFECE" filter="url(#fd0i3ubazv76u)" points="46,259.9471,111,259.9471,123,271.9471,111,283.9471,46,283.9471,34,271.9471,46,259.9471" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="65" x="46" y="276.2151">fixed phrase</text><rect fill="#FEFECE" filter="url(#fd0i3ubazv76u)" height="36.3441" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="137" x="10" y="303.9471"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="117" x="20" y="326.7752">emit room broadcast</text><polygon fill="#FEFECE" filter="url(#fd0i3ubazv76u)" points="210,259.9471,255,259.9471,267,271.9471,255,283.9471,210,283.9471,198,271.9471,210,259.9471" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="45" x="210" y="276.2151">where-is</text><rect fill="#FEFECE" filter="url(#fd0i3ubazv76u)" height="36.3441" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="131" x="167" y="303.9471"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="111" x="177" y="326.7752">query KG and speak</text><rect fill="#FEFECE" filter="url(#fd0i3ubazv76u)" height="36.3441" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="161" x="318" y="306.9471"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="141" x="328" y="329.7752">generic broadcast + echo</text><polygon fill="#FEFECE" filter="url(#fd0i3ubazv76u)" points="872,106.3441,995,106.3441,1007,118.3441,995,130.3441,872,130.3441,860,118.3441,872,106.3441" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="40" x="937.5" y="142.103">Camera</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="123" x="872" y="122.6121">device.type == "camera"</text><polygon fill="#FEFECE" filter="url(#fd0i3ubazv76u)" points="545,188.603,649,188.603,661,200.603,649,212.603,545,212.603,533,200.603,545,188.603" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="104" x="545" y="204.871">presence==detected</text><rect fill="#FEFECE" filter="url(#fd0i3ubazv76u)" height="36.3441" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="216" x="489" y="232.603"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="196" x="499" y="255.4311">lights on; thermostat +2; KG update</text><polygon fill="#FEFECE" filter="url(#fd0i3ubazv76u)" points="882,188.603,979,188.603,991,200.603,979,212.603,882,212.603,870,200.603,882,188.603" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="97" x="882" y="204.871">presence==leaving</text><rect fill="#FEFECE" filter="url(#fd0i3ubazv76u)" height="36.3441" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="431" x="715" y="232.603"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="411" x="725" y="255.4311">KG remove; if empty lights off &amp; thermostat -2; if one left dim &amp; set resting</text><polygon fill="#FEFECE" filter="url(#fd0i3ubazv76u)" points="1210,188.603,1294,188.603,1306,200.603,1294,212.603,1210,212.603,1198,200.603,1210,188.603" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="84" x="1210" y="204.871">occupant_status</text><rect fill="#FEFECE" filter="url(#fd0i3ubazv76u)" height="36.3441" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="172" x="1166" y="232.603"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="152" x="1176" y="255.4311">KG status; if active lights on</text><polygon fill="#FEFECE" filter="url(#fd0i3ubazv76u)" points="1388,106.3441,1734,106.3441,1746,118.3441,1734,130.3441,1388,130.3441,1376,118.3441,1388,106.3441" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="20" x="1565" y="142.103">Fire</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="346" x="1388" y="122.6121">device.type == "smoke_detector" &amp;&amp; key=="mode" &amp;&amp; value=="fire"</text><rect fill="#FEFECE" filter="url(#fd0i3ubazv76u)" height="36.3441" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="246" x="1438" y="163.603"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="226" x="1448" y="186.4311">if occupants present =&gt; lights on + speak</text><rect fill="#FEFECE" filter="url(#fd0i3ubazv76u)" height="36.3441" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="63" x="1529.5" y="234.9471"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="43" x="1539.5" y="257.7752">call 911</text><polygon fill="#FEFECE" filter="url(#fd0i3ubazv76u)" points="1778,106.3441,2008,106.3441,2020,118.3441,2008,130.3441,1778,130.3441,1766,118.3441,1778,106.3441" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="28" x="1897" y="142.103">Oven</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="230" x="1778" y="122.6121">device.type == "oven" &amp;&amp; key=="timetocook"</text><rect fill="#FEFECE" filter="url(#fd0i3ubazv76u)" height="36.3441" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="235" x="1775.5" y="163.603"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="215" x="1785.5" y="186.4311">if 0 and power on =&gt; power off + speak</text><polygon fill="#FEFECE" filter="url(#fd0i3ubazv76u)" points="2052,106.3441,2284,106.3441,2296,118.3441,2284,130.3441,2052,130.3441,2040,118.3441,2052,106.3441" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="34" x="2172" y="142.103">Fridge</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="232" x="2052" y="122.6121">device.type == "refrigerator" &amp;&amp; key=="beer"</text><rect fill="#FEFECE" filter="url(#fd0i3ubazv76u)" height="36.3441" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="208" x="2064" y="163.603"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="188" x="2074" y="186.4311">email store; if &lt;3 =&gt; prompt order</text><rect fill="#FEFECE" filter="url(#fd0i3ubazv76u)" height="36.3441" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="243" x="1062.5" y="403.9471"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="223" x="1072.5" y="426.7752">invoke commands via CommandInvoker</text><ellipse cx="1184" cy="471.2913" fill="#FFFFFF" filter="url(#fd0i3ubazv76u)" rx="11" ry="11" style="stroke: #000000; stroke-width: 1.0;"/><ellipse cx="1184" cy="471.2913" fill="#000000" rx="6" ry="6" style="stroke: #7F7F7F; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1184" x2="1184" y1="30" y2="50"/><polygon fill="#A80036" points="1180,40,1184,50,1188,40,1184,44" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="78.5" x2="78.5" y1="283.9471" y2="303.9471"/><polygon fill="#A80036" points="74.5,293.9471,78.5,303.9471,82.5,293.9471,78.5,297.9471" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="78.5" x2="78.5" y1="340.2913" y2="363.9471"/><polygon fill="#A80036" points="74.5,353.9471,78.5,363.9471,82.5,353.9471,78.5,357.9471" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="232.5" x2="232.5" y1="283.9471" y2="303.9471"/><polygon fill="#A80036" points="228.5,293.9471,232.5,303.9471,236.5,293.9471,232.5,297.9471" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="232.5" x2="232.5" y1="340.2913" y2="363.9471"/><polygon fill="#A80036" points="228.5,353.9471,232.5,363.9471,236.5,353.9471,232.5,357.9471" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="123" x2="198" y1="271.9471" y2="271.9471"/><polygon fill="#A80036" points="188,267.9471,198,271.9471,188,275.9471,192,271.9471" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="244.5" x2="244.5" y1="199.9471" y2="234.9471"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="244.5" x2="78.5" y1="234.9471" y2="234.9471"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="78.5" x2="78.5" y1="234.9471" y2="259.9471"/><polygon fill="#A80036" points="74.5,249.9471,78.5,259.9471,82.5,249.9471,78.5,253.9471" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="267" x2="398.5" y1="271.9471" y2="271.9471"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="398.5" x2="398.5" y1="271.9471" y2="306.9471"/><polygon fill="#A80036" points="394.5,296.9471,398.5,306.9471,402.5,296.9471,398.5,300.9471" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="398.5" x2="398.5" y1="343.2913" y2="363.9471"/><polygon fill="#A80036" points="394.5,353.9471,398.5,363.9471,402.5,353.9471,398.5,357.9471" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="78.5" x2="398.5" y1="363.9471" y2="363.9471"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="597" x2="597" y1="212.603" y2="232.603"/><polygon fill="#A80036" points="593,222.603,597,232.603,601,222.603,597,226.603" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="597" x2="597" y1="268.9471" y2="343.9471"/><polygon fill="#A80036" points="593,333.9471,597,343.9471,601,333.9471,597,337.9471" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="930.5" x2="930.5" y1="212.603" y2="232.603"/><polygon fill="#A80036" points="926.5,222.603,930.5,232.603,934.5,222.603,930.5,226.603" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="930.5" x2="930.5" y1="268.9471" y2="343.9471"/><polygon fill="#A80036" points="926.5,333.9471,930.5,343.9471,934.5,333.9471,930.5,337.9471" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1252" x2="1252" y1="212.603" y2="232.603"/><polygon fill="#A80036" points="1248,222.603,1252,232.603,1256,222.603,1252,226.603" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1252" x2="1252" y1="268.9471" y2="343.9471"/><polygon fill="#A80036" points="1248,333.9471,1252,343.9471,1256,333.9471,1252,337.9471" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="661" x2="870" y1="200.603" y2="200.603"/><polygon fill="#A80036" points="860,196.603,870,200.603,860,204.603,864,200.603" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="991" x2="1198" y1="200.603" y2="200.603"/><polygon fill="#A80036" points="1188,196.603,1198,200.603,1188,204.603,1192,200.603" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="933.5" x2="933.5" y1="130.3441" y2="163.603"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="933.5" x2="597" y1="163.603" y2="163.603"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="597" x2="597" y1="163.603" y2="188.603"/><polygon fill="#A80036" points="593,178.603,597,188.603,601,178.603,597,182.603" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1306" x2="1352" y1="200.603" y2="200.603"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1352" x2="1352" y1="200.603" y2="343.9471"/><polygon fill="#A80036" points="1348,333.9471,1352,343.9471,1356,333.9471,1352,337.9471" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="597" x2="1352" y1="343.9471" y2="343.9471"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1561" x2="1561" y1="199.9471" y2="234.9471"/><polygon fill="#A80036" points="1557,224.9471,1561,234.9471,1565,224.9471,1561,228.9471" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="244.5" x2="244.5" y1="130.3441" y2="163.603"/><polygon fill="#A80036" points="240.5,153.603,244.5,163.603,248.5,153.603,244.5,157.603" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="244.5" x2="244.5" y1="363.9471" y2="383.9471"/><polygon fill="#A80036" points="240.5,373.9471,244.5,383.9471,248.5,373.9471,244.5,377.9471" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="933.5" x2="933.5" y1="343.9471" y2="383.9471"/><polygon fill="#A80036" points="929.5,373.9471,933.5,383.9471,937.5,373.9471,933.5,377.9471" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1561" x2="1561" y1="130.3441" y2="163.603"/><polygon fill="#A80036" points="1557,153.603,1561,163.603,1565,153.603,1561,157.603" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1561" x2="1561" y1="271.2913" y2="383.9471"/><polygon fill="#A80036" points="1557,373.9471,1561,383.9471,1565,373.9471,1561,377.9471" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1893" x2="1893" y1="130.3441" y2="163.603"/><polygon fill="#A80036" points="1889,153.603,1893,163.603,1897,153.603,1893,157.603" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1893" x2="1893" y1="199.9471" y2="383.9471"/><polygon fill="#A80036" points="1889,373.9471,1893,383.9471,1897,373.9471,1893,377.9471" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="2168" x2="2168" y1="130.3441" y2="163.603"/><polygon fill="#A80036" points="2164,153.603,2168,163.603,2172,153.603,2168,157.603" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="2168" x2="2168" y1="199.9471" y2="383.9471"/><polygon fill="#A80036" points="2164,373.9471,2168,383.9471,2172,373.9471,2168,377.9471" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="364" x2="860" y1="118.3441" y2="118.3441"/><polygon fill="#A80036" points="850,114.3441,860,118.3441,850,122.3441,854,118.3441" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1007" x2="1376" y1="118.3441" y2="118.3441"/><polygon fill="#A80036" points="1366,114.3441,1376,118.3441,1366,122.3441,1370,118.3441" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1746" x2="1766" y1="118.3441" y2="118.3441"/><polygon fill="#A80036" points="1756,114.3441,1766,118.3441,1756,122.3441,1760,118.3441" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="2020" x2="2040" y1="118.3441" y2="118.3441"/><polygon fill="#A80036" points="2030,114.3441,2040,118.3441,2030,122.3441,2034,118.3441" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1184" x2="1184" y1="86.3441" y2="91.3441"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1184" x2="244.5" y1="91.3441" y2="91.3441"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="244.5" x2="244.5" y1="91.3441" y2="106.3441"/><polygon fill="#A80036" points="240.5,96.3441,244.5,106.3441,248.5,96.3441,244.5,100.3441" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="2296" x2="2310" y1="118.3441" y2="118.3441"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="2310" x2="2310" y1="118.3441" y2="383.9471"/><polygon fill="#A80036" points="2306,373.9471,2310,383.9471,2314,373.9471,2310,377.9471" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="244.5" x2="2310" y1="383.9471" y2="383.9471"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1184" x2="1184" y1="383.9471" y2="403.9471"/><polygon fill="#A80036" points="1180,393.9471,1184,403.9471,1188,393.9471,1184,397.9471" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1184" x2="1184" y1="440.2913" y2="460.2913"/><polygon fill="#A80036" points="1180,450.2913,1184,460.2913,1188,450.2913,1184,454.2913" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[f2c0430285d342b0239da9b90bdfd587]
@startuml
start
:onStatusChange(device,key,value);
if (device.type == "ava" && key=="command") then (Ava)
  :parse utterance;
  if (fixed phrase) then
    :emit room broadcast;
  else if (where-is) then
    :query KG and speak;
  else
    :generic broadcast + echo;
  endif
elseif (device.type == "camera") then (Camera)
  if (presence==detected) then
    :lights on; thermostat +2; KG update;
  elseif (presence==leaving) then
    :KG remove; if empty lights off & thermostat -2; if one left dim & set resting;
  elseif (occupant_status) then
    :KG status; if active lights on;
  endif
elseif (device.type == "smoke_detector" && key=="mode" && value=="fire") then (Fire)
  :if occupants present => lights on + speak;
  :call 911;
elseif (device.type == "oven" && key=="timetocook") then (Oven)
  :if 0 and power on => power off + speak;
elseif (device.type == "refrigerator" && key=="beer") then (Fridge)
  :email store; if <3 => prompt order;
endif
:invoke commands via CommandInvoker;
stop
@enduml

PlantUML version 1.2020.02(Sun Mar 01 02:22:07 PST 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 21.0.7+6-LTS
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg>