<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="680px" preserveAspectRatio="none" style="width:2776px;height:680px;" version="1.1" viewBox="0 0 2776 680" width="2776px" zoomAndPan="magnify"><defs><filter height="300%" id="fzp3t4x00twvw" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[516c288589fe049e90595ab90873ee4f]
class ControllerService--><rect fill="#FEFECE" filter="url(#fzp3t4x00twvw)" height="92.9457" id="ControllerService" style="stroke: #A80036; stroke-width: 1.5;" width="129" x="6" y="390"/><ellipse cx="21" cy="406" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M23.9688,411.6406 Q23.3906,411.9375 22.75,412.0781 Q22.1094,412.2344 21.4063,412.2344 Q18.9063,412.2344 17.5781,410.5938 Q16.2656,408.9375 16.2656,405.8125 Q16.2656,402.6875 17.5781,401.0313 Q18.9063,399.375 21.4063,399.375 Q22.1094,399.375 22.75,399.5313 Q23.4063,399.6875 23.9688,399.9844 L23.9688,402.7031 Q23.3438,402.125 22.75,401.8594 Q22.1563,401.5781 21.5313,401.5781 Q20.1875,401.5781 19.5,402.6563 Q18.8125,403.7188 18.8125,405.8125 Q18.8125,407.9063 19.5,408.9844 Q20.1875,410.0469 21.5313,410.0469 Q22.1563,410.0469 22.75,409.7813 Q23.3438,409.5 23.9688,408.9219 L23.9688,411.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="97" x="35" y="410.656">ControllerService</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="7" x2="134" y1="422" y2="422"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="7" x2="134" y1="430" y2="430"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="36" x="12" y="445.7589">+start()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="35" x="12" y="460.7408">+stop()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="87" x="12" y="475.7227">+getLog(): String</text><!--MD5=[47fb477931b76cbe0bfa99cd361eb9a0]
class DeviceEventListener--><rect fill="#FEFECE" filter="url(#fzp3t4x00twvw)" height="62.9819" id="DeviceEventListener" style="stroke: #A80036; stroke-width: 1.5;" width="258" x="170.5" y="405"/><ellipse cx="242.75" cy="421" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M238.6719,416.7656 L238.6719,414.6094 L246.0625,414.6094 L246.0625,416.7656 L243.5938,416.7656 L243.5938,424.8438 L246.0625,424.8438 L246.0625,427 L238.6719,427 L238.6719,424.8438 L241.1406,424.8438 L241.1406,416.7656 L238.6719,416.7656 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="105" x="263.25" y="425.656">DeviceEventListener</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="171.5" x2="427.5" y1="437" y2="437"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="171.5" x2="427.5" y1="445" y2="445"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="246" x="176.5" y="460.7589">+onStatusChange(Device, String, String, String)</text><!--MD5=[d0956e5c0989f9527c09c0f6283a84af]
class ControllerServiceImpl--><rect fill="#FEFECE" filter="url(#fzp3t4x00twvw)" height="272.7283" id="ControllerServiceImpl" style="stroke: #A80036; stroke-width: 1.5;" width="226" x="759.5" y="8"/><ellipse cx="807.25" cy="24" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M810.2188,29.6406 Q809.6406,29.9375 809,30.0781 Q808.3594,30.2344 807.6563,30.2344 Q805.1563,30.2344 803.8281,28.5938 Q802.5156,26.9375 802.5156,23.8125 Q802.5156,20.6875 803.8281,19.0313 Q805.1563,17.375 807.6563,17.375 Q808.3594,17.375 809,17.5313 Q809.6563,17.6875 810.2188,17.9844 L810.2188,20.7031 Q809.5938,20.125 809,19.8594 Q808.4063,19.5781 807.7813,19.5781 Q806.4375,19.5781 805.75,20.6563 Q805.0625,21.7188 805.0625,23.8125 Q805.0625,25.9063 805.75,26.9844 Q806.4375,28.0469 807.7813,28.0469 Q808.4063,28.0469 809,27.7813 Q809.5938,27.5 810.2188,26.9219 L810.2188,29.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="122" x="827.75" y="28.656">ControllerServiceImpl</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="760.5" x2="984.5" y1="40" y2="40"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="172" x="765.5" y="55.7589">-model: HousemateModelService</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="152" x="765.5" y="70.7408">-kg: KnowledgeGraphService</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="145" x="765.5" y="85.7227">-invoker: CommandInvoker</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="89" x="765.5" y="100.7046">-log: List&lt;String&gt;</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="214" x="765.5" y="115.6865">-beerPromptPendingRooms: Set&lt;String&gt;</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="760.5" x2="984.5" y1="122.9094" y2="122.9094"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="36" x="765.5" y="138.6684">+start()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="35" x="765.5" y="153.6502">+stop()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="87" x="765.5" y="168.6321">+getLog(): String</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="107" x="765.5" y="183.614">+onStatusChange(...)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="128" x="765.5" y="198.5959">-handleAvaCommand(...)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="124" x="765.5" y="213.5778">-handleCameraEvent(...)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="98" x="765.5" y="228.5597">-handleFire(house)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="83" x="765.5" y="243.5416">-handleOven(...)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="120" x="765.5" y="258.5235">-handleRefrigerator(...)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="200" x="765.5" y="273.5053">-bumpThermostat(house, room, delta)</text><!--MD5=[f8e7078f77c005d15b486c0c98deb1e6]
class Action--><rect fill="#FEFECE" filter="url(#fzp3t4x00twvw)" height="77.9638" id="Action" style="stroke: #A80036; stroke-width: 1.5;" width="106" x="1836.5" y="592"/><ellipse cx="1869.95" cy="608" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1865.8719,603.7656 L1865.8719,601.6094 L1873.2625,601.6094 L1873.2625,603.7656 L1870.7938,603.7656 L1870.7938,611.8438 L1873.2625,611.8438 L1873.2625,614 L1865.8719,614 L1865.8719,611.8438 L1868.3406,611.8438 L1868.3406,603.7656 L1865.8719,603.7656 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="33" x="1888.05" y="612.656">Action</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1837.5" x2="1941.5" y1="624" y2="624"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1837.5" x2="1941.5" y1="632" y2="632"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="52" x="1842.5" y="647.7589">+execute()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="94" x="1842.5" y="662.7408">+describe(): String</text><!--MD5=[1094fe2baf57ccf29e390aed09145014]
class CommandInvoker--><rect fill="#FEFECE" filter="url(#fzp3t4x00twvw)" height="92.9457" id="CommandInvoker" style="stroke: #A80036; stroke-width: 1.5;" width="189" x="2364" y="390"/><ellipse cx="2404.65" cy="406" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M2407.6188,411.6406 Q2407.0406,411.9375 2406.4,412.0781 Q2405.7594,412.2344 2405.0563,412.2344 Q2402.5563,412.2344 2401.2281,410.5938 Q2399.9156,408.9375 2399.9156,405.8125 Q2399.9156,402.6875 2401.2281,401.0313 Q2402.5563,399.375 2405.0563,399.375 Q2405.7594,399.375 2406.4,399.5313 Q2407.0563,399.6875 2407.6188,399.9844 L2407.6188,402.7031 Q2406.9938,402.125 2406.4,401.8594 Q2405.8063,401.5781 2405.1813,401.5781 Q2403.8375,401.5781 2403.15,402.6563 Q2402.4625,403.7188 2402.4625,405.8125 Q2402.4625,407.9063 2403.15,408.9844 Q2403.8375,410.0469 2405.1813,410.0469 Q2405.8063,410.0469 2406.4,409.7813 Q2406.9938,409.5 2407.6188,408.9219 L2407.6188,411.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="100" x="2424.35" y="410.656">CommandInvoker</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="2365" x2="2552" y1="422" y2="422"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="177" x="2370" y="437.7589">-controller: ControllerServiceImpl</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="2365" x2="2552" y1="444.9819" y2="444.9819"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="76" x="2370" y="460.7408">+run(a: Action)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="128" x="2370" y="475.7227">+runAll(list: List&lt;Action&gt;)</text><!--MD5=[be11a8e837264a46a958e2d755e31f43]
class SetStatusCommand--><rect fill="#FEFECE" filter="url(#fzp3t4x00twvw)" height="152.8732" id="SetStatusCommand" style="stroke: #A80036; stroke-width: 1.5;" width="184" x="463.5" y="360"/><ellipse cx="496.95" cy="376" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M499.9188,381.6406 Q499.3406,381.9375 498.7,382.0781 Q498.0594,382.2344 497.3563,382.2344 Q494.8563,382.2344 493.5281,380.5938 Q492.2156,378.9375 492.2156,375.8125 Q492.2156,372.6875 493.5281,371.0313 Q494.8563,369.375 497.3563,369.375 Q498.0594,369.375 498.7,369.5313 Q499.3563,369.6875 499.9188,369.9844 L499.9188,372.7031 Q499.2938,372.125 498.7,371.8594 Q498.1063,371.5781 497.4813,371.5781 Q496.1375,371.5781 495.45,372.6563 Q494.7625,373.7188 494.7625,375.8125 Q494.7625,377.9063 495.45,378.9844 Q496.1375,380.0469 497.4813,380.0469 Q498.1063,380.0469 498.7,379.7813 Q499.2938,379.5 499.9188,378.9219 L499.9188,381.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="111" x="515.05" y="380.656">SetStatusCommand</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="464.5" x2="646.5" y1="392" y2="392"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="172" x="469.5" y="407.7589">-model: HousemateModelService</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="66" x="469.5" y="422.7408">-auth: String</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="100" x="469.5" y="437.7227">-path: AddressPath</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="60" x="469.5" y="452.7046">-key: String</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="70" x="469.5" y="467.6865">-value: String</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="464.5" x2="646.5" y1="474.9094" y2="474.9094"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="52" x="469.5" y="490.6684">+execute()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="94" x="469.5" y="505.6502">+describe(): String</text><!--MD5=[5e42579e2a82e95f042c7d66f4c97080]
class RoomBroadcastCommand--><rect fill="#FEFECE" filter="url(#fzp3t4x00twvw)" height="107.9276" id="RoomBroadcastCommand" style="stroke: #A80036; stroke-width: 1.5;" width="258" x="1361.5" y="382.5"/><ellipse cx="1412.75" cy="398.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1415.7188,404.1406 Q1415.1406,404.4375 1414.5,404.5781 Q1413.8594,404.7344 1413.1563,404.7344 Q1410.6563,404.7344 1409.3281,403.0938 Q1408.0156,401.4375 1408.0156,398.3125 Q1408.0156,395.1875 1409.3281,393.5313 Q1410.6563,391.875 1413.1563,391.875 Q1413.8594,391.875 1414.5,392.0313 Q1415.1563,392.1875 1415.7188,392.4844 L1415.7188,395.2031 Q1415.0938,394.625 1414.5,394.3594 Q1413.9063,394.0781 1413.2813,394.0781 Q1411.9375,394.0781 1411.25,395.1563 Q1410.5625,396.2188 1410.5625,398.3125 Q1410.5625,400.4063 1411.25,401.4844 Q1411.9375,402.5469 1413.2813,402.5469 Q1413.9063,402.5469 1414.5,402.2813 Q1415.0938,402 1415.7188,401.4219 L1415.7188,404.1406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="147" x="1433.25" y="403.156">RoomBroadcastCommand</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1362.5" x2="1618.5" y1="414.5" y2="414.5"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="172" x="1367.5" y="430.2589">-model: HousemateModelService</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="246" x="1367.5" y="445.2408">-auth,house,room,deviceType,key,value: String</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1362.5" x2="1618.5" y1="452.4638" y2="452.4638"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="52" x="1367.5" y="468.2227">+execute()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="94" x="1367.5" y="483.2046">+describe(): String</text><!--MD5=[420adb07fa6325f4ffb82afef3bbc7c4]
class HouseBroadcastCommand--><rect fill="#FEFECE" filter="url(#fzp3t4x00twvw)" height="107.9276" id="HouseBroadcastCommand" style="stroke: #A80036; stroke-width: 1.5;" width="226" x="1654.5" y="382.5"/><ellipse cx="1688.85" cy="398.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1691.8188,404.1406 Q1691.2406,404.4375 1690.6,404.5781 Q1689.9594,404.7344 1689.2563,404.7344 Q1686.7563,404.7344 1685.4281,403.0938 Q1684.1156,401.4375 1684.1156,398.3125 Q1684.1156,395.1875 1685.4281,393.5313 Q1686.7563,391.875 1689.2563,391.875 Q1689.9594,391.875 1690.6,392.0313 Q1691.2563,392.1875 1691.8188,392.4844 L1691.8188,395.2031 Q1691.1938,394.625 1690.6,394.3594 Q1690.0063,394.0781 1689.3813,394.0781 Q1688.0375,394.0781 1687.35,395.1563 Q1686.6625,396.2188 1686.6625,398.3125 Q1686.6625,400.4063 1687.35,401.4844 Q1688.0375,402.5469 1689.3813,402.5469 Q1690.0063,402.5469 1690.6,402.2813 Q1691.1938,402 1691.8188,401.4219 L1691.8188,404.1406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="151" x="1707.15" y="403.156">HouseBroadcastCommand</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1655.5" x2="1879.5" y1="414.5" y2="414.5"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="172" x="1660.5" y="430.2589">-model: HousemateModelService</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="214" x="1660.5" y="445.2408">-auth,house,deviceType,key,value: String</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1655.5" x2="1879.5" y1="452.4638" y2="452.4638"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="52" x="1660.5" y="468.2227">+execute()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="94" x="1660.5" y="483.2046">+describe(): String</text><!--MD5=[890230c137a81e873b45c4ec8a545173]
class SpeakCommand--><rect fill="#FEFECE" filter="url(#fzp3t4x00twvw)" height="107.9276" id="SpeakCommand" style="stroke: #A80036; stroke-width: 1.5;" width="189" x="1916" y="382.5"/><ellipse cx="1960.25" cy="398.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1963.2188,404.1406 Q1962.6406,404.4375 1962,404.5781 Q1961.3594,404.7344 1960.6563,404.7344 Q1958.1563,404.7344 1956.8281,403.0938 Q1955.5156,401.4375 1955.5156,398.3125 Q1955.5156,395.1875 1956.8281,393.5313 Q1958.1563,391.875 1960.6563,391.875 Q1961.3594,391.875 1962,392.0313 Q1962.6563,392.1875 1963.2188,392.4844 L1963.2188,395.2031 Q1962.5938,394.625 1962,394.3594 Q1961.4063,394.0781 1960.7813,394.0781 Q1959.4375,394.0781 1958.75,395.1563 Q1958.0625,396.2188 1958.0625,398.3125 Q1958.0625,400.4063 1958.75,401.4844 Q1959.4375,402.5469 1960.7813,402.5469 Q1961.4063,402.5469 1962,402.2813 Q1962.5938,402 1963.2188,401.4219 L1963.2188,404.1406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="92" x="1980.75" y="403.156">SpeakCommand</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1917" x2="2104" y1="414.5" y2="414.5"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="177" x="1922" y="430.2589">-controller: ControllerServiceImpl</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="129" x="1922" y="445.2408">-house,room,text: String</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1917" x2="2104" y1="452.4638" y2="452.4638"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="52" x="1922" y="468.2227">+execute()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="94" x="1922" y="483.2046">+describe(): String</text><!--MD5=[d72e64e94819ffff6e0238f81e0217e4]
class ExternalCallCommand--><rect fill="#FEFECE" filter="url(#fzp3t4x00twvw)" height="107.9276" id="ExternalCallCommand" style="stroke: #A80036; stroke-width: 1.5;" width="189" x="2140" y="382.5"/><ellipse cx="2169.4" cy="398.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M2172.3688,404.1406 Q2171.7906,404.4375 2171.15,404.5781 Q2170.5094,404.7344 2169.8063,404.7344 Q2167.3063,404.7344 2165.9781,403.0938 Q2164.6656,401.4375 2164.6656,398.3125 Q2164.6656,395.1875 2165.9781,393.5313 Q2167.3063,391.875 2169.8063,391.875 Q2170.5094,391.875 2171.15,392.0313 Q2171.8063,392.1875 2172.3688,392.4844 L2172.3688,395.2031 Q2171.7438,394.625 2171.15,394.3594 Q2170.5563,394.0781 2169.9313,394.0781 Q2168.5875,394.0781 2167.9,395.1563 Q2167.2125,396.2188 2167.2125,398.3125 Q2167.2125,400.4063 2167.9,401.4844 Q2168.5875,402.5469 2169.9313,402.5469 Q2170.5563,402.5469 2171.15,402.2813 Q2171.7438,402 2172.3688,401.4219 L2172.3688,404.1406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="125" x="2186.6" y="403.156">ExternalCallCommand</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="2141" x2="2328" y1="414.5" y2="414.5"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="177" x="2146" y="430.2589">-controller: ControllerServiceImpl</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="110" x="2146" y="445.2408">-kind,payload: String</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="2141" x2="2328" y1="452.4638" y2="452.4638"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="52" x="2146" y="468.2227">+execute()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="94" x="2146" y="483.2046">+describe(): String</text><!--MD5=[28b40ec0eb1affef216e116dd7366cb3]
class HousemateModelService--><rect fill="#FEFECE" filter="url(#fzp3t4x00twvw)" height="48" id="HousemateModelService" style="stroke: #A80036; stroke-width: 1.5;" width="173" x="683" y="412.5"/><ellipse cx="698" cy="428.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M700.9688,434.1406 Q700.3906,434.4375 699.75,434.5781 Q699.1094,434.7344 698.4063,434.7344 Q695.9063,434.7344 694.5781,433.0938 Q693.2656,431.4375 693.2656,428.3125 Q693.2656,425.1875 694.5781,423.5313 Q695.9063,421.875 698.4063,421.875 Q699.1094,421.875 699.75,422.0313 Q700.4063,422.1875 700.9688,422.4844 L700.9688,425.2031 Q700.3438,424.625 699.75,424.3594 Q699.1563,424.0781 698.5313,424.0781 Q697.1875,424.0781 696.5,425.1563 Q695.8125,426.2188 695.8125,428.3125 Q695.8125,430.4063 696.5,431.4844 Q697.1875,432.5469 698.5313,432.5469 Q699.1563,432.5469 699.75,432.2813 Q700.3438,432 700.9688,431.4219 L700.9688,434.1406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="141" x="712" y="433.156">HousemateModelService</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="684" x2="855" y1="444.5" y2="444.5"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="684" x2="855" y1="452.5" y2="452.5"/><!--MD5=[93263b9c7f54c4b3e0a7c75f54807d27]
class KnowledgeGraphService--><rect fill="#FEFECE" filter="url(#fzp3t4x00twvw)" height="48" id="KnowledgeGraphService" style="stroke: #A80036; stroke-width: 1.5;" width="169" x="891" y="412.5"/><ellipse cx="906" cy="428.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M908.9688,434.1406 Q908.3906,434.4375 907.75,434.5781 Q907.1094,434.7344 906.4063,434.7344 Q903.9063,434.7344 902.5781,433.0938 Q901.2656,431.4375 901.2656,428.3125 Q901.2656,425.1875 902.5781,423.5313 Q903.9063,421.875 906.4063,421.875 Q907.1094,421.875 907.75,422.0313 Q908.4063,422.1875 908.9688,422.4844 L908.9688,425.2031 Q908.3438,424.625 907.75,424.3594 Q907.1563,424.0781 906.5313,424.0781 Q905.1875,424.0781 904.5,425.1563 Q903.8125,426.2188 903.8125,428.3125 Q903.8125,430.4063 904.5,431.4844 Q905.1875,432.5469 906.5313,432.5469 Q907.1563,432.5469 907.75,432.2813 Q908.3438,432 908.9688,431.4219 L908.9688,434.1406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="137" x="920" y="433.156">KnowledgeGraphService</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="892" x2="1059" y1="444.5" y2="444.5"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="892" x2="1059" y1="452.5" y2="452.5"/><!--MD5=[7976fd030cde3e2339be1ed2cb3c88b0]
class ControllerContext--><rect fill="#FEFECE" filter="url(#fzp3t4x00twvw)" height="122.9094" id="ControllerContext" style="stroke: #A80036; stroke-width: 1.5;" width="232" x="1094.5" y="375"/><ellipse cx="1156.75" cy="391" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1159.7188,396.6406 Q1159.1406,396.9375 1158.5,397.0781 Q1157.8594,397.2344 1157.1563,397.2344 Q1154.6563,397.2344 1153.3281,395.5938 Q1152.0156,393.9375 1152.0156,390.8125 Q1152.0156,387.6875 1153.3281,386.0313 Q1154.6563,384.375 1157.1563,384.375 Q1157.8594,384.375 1158.5,384.5313 Q1159.1563,384.6875 1159.7188,384.9844 L1159.7188,387.7031 Q1159.0938,387.125 1158.5,386.8594 Q1157.9063,386.5781 1157.2813,386.5781 Q1155.9375,386.5781 1155.25,387.6563 Q1154.5625,388.7188 1154.5625,390.8125 Q1154.5625,392.9063 1155.25,393.9844 Q1155.9375,395.0469 1157.2813,395.0469 Q1157.9063,395.0469 1158.5,394.7813 Q1159.0938,394.5 1159.7188,393.9219 L1159.7188,396.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="99" x="1177.25" y="395.656">ControllerContext</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1095.5" x2="1325.5" y1="407" y2="407"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="172" x="1100.5" y="422.7589">-model: HousemateModelService</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="66" x="1100.5" y="437.7408">-auth: String</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1095.5" x2="1325.5" y1="444.9638" y2="444.9638"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="220" x="1100.5" y="460.7227">+devicesOfTypeInRoom(house,room,type)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="192" x="1100.5" y="475.7046">+anyOccupantsInRoom(house,room)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="153" x="1100.5" y="490.6865">+getOccupantLocation(name)</text><!--MD5=[5005bba8c6d1dda988b0bcc8eba409f6]
class House--><rect fill="#FEFECE" filter="url(#fzp3t4x00twvw)" height="48" id="House" style="stroke: #A80036; stroke-width: 1.5;" width="68" x="2650.5" y="120.5"/><ellipse cx="2665.5" cy="136.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M2668.4688,142.1406 Q2667.8906,142.4375 2667.25,142.5781 Q2666.6094,142.7344 2665.9063,142.7344 Q2663.4063,142.7344 2662.0781,141.0938 Q2660.7656,139.4375 2660.7656,136.3125 Q2660.7656,133.1875 2662.0781,131.5313 Q2663.4063,129.875 2665.9063,129.875 Q2666.6094,129.875 2667.25,130.0313 Q2667.9063,130.1875 2668.4688,130.4844 L2668.4688,133.2031 Q2667.8438,132.625 2667.25,132.3594 Q2666.6563,132.0781 2666.0313,132.0781 Q2664.6875,132.0781 2664,133.1563 Q2663.3125,134.2188 2663.3125,136.3125 Q2663.3125,138.4063 2664,139.4844 Q2664.6875,140.5469 2666.0313,140.5469 Q2666.6563,140.5469 2667.25,140.2813 Q2667.8438,140 2668.4688,139.4219 L2668.4688,142.1406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="36" x="2679.5" y="141.156">House</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="2651.5" x2="2717.5" y1="152.5" y2="152.5"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="2651.5" x2="2717.5" y1="160.5" y2="160.5"/><!--MD5=[d218c48b946d362ff1ecd879cabebcad]
class Room--><rect fill="#FEFECE" filter="url(#fzp3t4x00twvw)" height="48" id="Room" style="stroke: #A80036; stroke-width: 1.5;" width="64" x="2588.5" y="412.5"/><ellipse cx="2603.5" cy="428.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M2606.4688,434.1406 Q2605.8906,434.4375 2605.25,434.5781 Q2604.6094,434.7344 2603.9063,434.7344 Q2601.4063,434.7344 2600.0781,433.0938 Q2598.7656,431.4375 2598.7656,428.3125 Q2598.7656,425.1875 2600.0781,423.5313 Q2601.4063,421.875 2603.9063,421.875 Q2604.6094,421.875 2605.25,422.0313 Q2605.9063,422.1875 2606.4688,422.4844 L2606.4688,425.2031 Q2605.8438,424.625 2605.25,424.3594 Q2604.6563,424.0781 2604.0313,424.0781 Q2602.6875,424.0781 2602,425.1563 Q2601.3125,426.2188 2601.3125,428.3125 Q2601.3125,430.4063 2602,431.4844 Q2602.6875,432.5469 2604.0313,432.5469 Q2604.6563,432.5469 2605.25,432.2813 Q2605.8438,432 2606.4688,431.4219 L2606.4688,434.1406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="32" x="2617.5" y="433.156">Room</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="2589.5" x2="2651.5" y1="444.5" y2="444.5"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="2589.5" x2="2651.5" y1="452.5" y2="452.5"/><!--MD5=[fc539fa3f3b7db9b31467e896d367b3b]
class Device--><rect fill="#FEFECE" filter="url(#fzp3t4x00twvw)" height="48" id="Device" style="stroke: #A80036; stroke-width: 1.5;" width="70" x="2494.5" y="607"/><ellipse cx="2509.5" cy="623" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M2512.4688,628.6406 Q2511.8906,628.9375 2511.25,629.0781 Q2510.6094,629.2344 2509.9063,629.2344 Q2507.4063,629.2344 2506.0781,627.5938 Q2504.7656,625.9375 2504.7656,622.8125 Q2504.7656,619.6875 2506.0781,618.0313 Q2507.4063,616.375 2509.9063,616.375 Q2510.6094,616.375 2511.25,616.5313 Q2511.9063,616.6875 2512.4688,616.9844 L2512.4688,619.7031 Q2511.8438,619.125 2511.25,618.8594 Q2510.6563,618.5781 2510.0313,618.5781 Q2508.6875,618.5781 2508,619.6563 Q2507.3125,620.7188 2507.3125,622.8125 Q2507.3125,624.9063 2508,625.9844 Q2508.6875,627.0469 2510.0313,627.0469 Q2510.6563,627.0469 2511.25,626.7813 Q2511.8438,626.5 2512.4688,625.9219 L2512.4688,628.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="38" x="2523.5" y="627.656">Device</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="2495.5" x2="2563.5" y1="639" y2="639"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="2495.5" x2="2563.5" y1="647" y2="647"/><!--MD5=[e437689f509b2941bd7ef5d5d6c3ce24]
class Occupant--><rect fill="#FEFECE" filter="url(#fzp3t4x00twvw)" height="48" id="Occupant" style="stroke: #A80036; stroke-width: 1.5;" width="85" x="2640" y="607"/><ellipse cx="2655" cy="623" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M2657.9688,628.6406 Q2657.3906,628.9375 2656.75,629.0781 Q2656.1094,629.2344 2655.4063,629.2344 Q2652.9063,629.2344 2651.5781,627.5938 Q2650.2656,625.9375 2650.2656,622.8125 Q2650.2656,619.6875 2651.5781,618.0313 Q2652.9063,616.375 2655.4063,616.375 Q2656.1094,616.375 2656.75,616.5313 Q2657.4063,616.6875 2657.9688,616.9844 L2657.9688,619.7031 Q2657.3438,619.125 2656.75,618.8594 Q2656.1563,618.5781 2655.5313,618.5781 Q2654.1875,618.5781 2653.5,619.6563 Q2652.8125,620.7188 2652.8125,622.8125 Q2652.8125,624.9063 2653.5,625.9844 Q2654.1875,627.0469 2655.5313,627.0469 Q2656.1563,627.0469 2656.75,626.7813 Q2657.3438,626.5 2657.9688,625.9219 L2657.9688,628.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="53" x="2669" y="627.656">Occupant</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="2641" x2="2724" y1="639" y2="639"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="2641" x2="2724" y1="647" y2="647"/><!--MD5=[85a17721abf46ecf6b3816b05766e127]
class AddressPath--><rect fill="#FEFECE" filter="url(#fzp3t4x00twvw)" height="62.9819" id="AddressPath" style="stroke: #A80036; stroke-width: 1.5;" width="105" x="503" y="599.5"/><ellipse cx="518.9" cy="615.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M521.8688,621.1406 Q521.2906,621.4375 520.65,621.5781 Q520.0094,621.7344 519.3063,621.7344 Q516.8063,621.7344 515.4781,620.0938 Q514.1656,618.4375 514.1656,615.3125 Q514.1656,612.1875 515.4781,610.5313 Q516.8063,608.875 519.3063,608.875 Q520.0094,608.875 520.65,609.0313 Q521.3063,609.1875 521.8688,609.4844 L521.8688,612.2031 Q521.2438,611.625 520.65,611.3594 Q520.0563,611.0781 519.4313,611.0781 Q518.0875,611.0781 517.4,612.1563 Q516.7125,613.2188 516.7125,615.3125 Q516.7125,617.4063 517.4,618.4844 Q518.0875,619.5469 519.4313,619.5469 Q520.0563,619.5469 520.65,619.2813 Q521.2438,619 521.8688,618.4219 L521.8688,621.1406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="71" x="533.1" y="620.156">AddressPath</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="504" x2="607" y1="631.5" y2="631.5"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="504" x2="607" y1="639.5" y2="639.5"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="93" x="509" y="655.2589">+toString(): String</text><!--MD5=[55266c4ac7623b0ecab2eb44e5afe58e]
link ControllerServiceImpl to ControllerService--><path d="M759.26,162.85 C611.9,188.98 349.95,247.78 152.5,360 C144.11,364.77 135.88,370.55 128.06,376.76 " fill="none" id="ControllerServiceImpl-&gt;ControllerService" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="none" points="132.41,382.24,112.67,389.93,123.31,371.6,132.41,382.24" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[3710fa1b62650918cf89c80dcbfe0678]
link ControllerServiceImpl to DeviceEventListener--><path d="M759.49,201.82 C673.31,244.87 551.75,305.84 445.5,360 C422.94,371.5 398.49,384.09 376.15,395.65 " fill="none" id="ControllerServiceImpl-&gt;DeviceEventListener" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="none" points="379.36,401.87,358.38,404.85,372.92,389.44,379.36,401.87" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[3b3c96c3955e05a25762ea62cfe81520]
link CommandInvoker to Action--><path d="M2399.1,483.02 C2382.71,494.03 2364.47,504.93 2346.5,513 C2210.47,574.06 2036.79,607.44 1947.81,621.64 " fill="none" id="CommandInvoker-&gt;Action" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1942.85,622.42,1952.3592,624.9843,1947.7902,621.649,1951.1255,617.08,1942.85,622.42" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[61b8a67a77e38f87694bda4b76237d45]
link SetStatusCommand to Action--><path d="M647.66,505.38 C653.54,508.25 659.51,510.83 665.5,513 C879.4,590.7 1586.08,620.13 1816.3,627.8 " fill="none" id="SetStatusCommand-&gt;Action" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="none" points="1816.67,620.81,1836.44,628.45,1816.22,634.8,1816.67,620.81" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[b010066964d2b9aea46e05ff44101fed]
link RoomBroadcastCommand to Action--><path d="M1591.92,490.68 C1606.82,498.27 1622.02,505.91 1636.5,513 C1697.2,542.71 1766.97,574.83 1817.85,597.88 " fill="none" id="RoomBroadcastCommand-&gt;Action" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="none" points="1821.02,591.63,1836.36,606.25,1815.25,604.39,1821.02,591.63" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[1212a7b298a42961837338f7351d8216]
link HouseBroadcastCommand to Action--><path d="M1801.16,490.61 C1817.74,516.78 1837.73,548.31 1854.49,574.76 " fill="none" id="HouseBroadcastCommand-&gt;Action" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="none" points="1860.44,571.07,1865.23,591.71,1848.61,578.56,1860.44,571.07" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[22e5f3cae834a8cb921a3041f38d3fa8]
link SpeakCommand to Action--><path d="M1977.12,490.61 C1960.67,516.78 1940.85,548.31 1924.23,574.76 " fill="none" id="SpeakCommand-&gt;Action" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="none" points="1930.14,578.5,1913.57,591.71,1918.29,571.05,1930.14,578.5" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[952b7d2d644c137b9b90b5c482be64a1]
link ExternalCallCommand to Action--><path d="M2158.52,490.61 C2146.62,498.37 2134.34,506.07 2122.5,513 C2069.79,543.83 2007.92,574.66 1961.19,596.93 " fill="none" id="ExternalCallCommand-&gt;Action" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="none" points="1963.88,603.4,1942.8,605.62,1957.89,590.75,1963.88,603.4" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[345f63a3e4c71414cb0c5a97ca19ab50]
link ControllerServiceImpl to CommandInvoker--><path d="M985.88,145.05 C1238.93,147.64 1865.29,174.01 2346.5,360 C2363.89,366.72 2381.29,376.55 2397.01,386.91 " fill="none" id="ControllerServiceImpl-&gt;CommandInvoker" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="2401.39,389.85,2396.1401,381.517,2397.2363,387.0666,2391.6867,388.1628,2401.39,389.85" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[34b6a7ca345af8123347d0d250700eb0]
link ControllerServiceImpl to HousemateModelService--><path d="M824.32,281.16 C807.39,328.82 789.98,377.83 779.45,407.48 " fill="none" id="ControllerServiceImpl-&gt;HousemateModelService" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="777.69,412.43,784.4675,405.284,779.3608,407.7174,776.9274,402.6107,777.69,412.43" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[e47b1c66b86adb1fdfcc85b3b0c805b0]
link ControllerServiceImpl to KnowledgeGraphService--><path d="M920.68,281.16 C937.61,328.82 955.02,377.83 965.55,407.48 " fill="none" id="ControllerServiceImpl-&gt;KnowledgeGraphService" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="967.31,412.43,968.0726,402.6107,965.6392,407.7174,960.5325,405.284,967.31,412.43" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[52fe195d8f37d6ba5e191706296d6217]
link ControllerServiceImpl to ControllerContext--><path d="M985.52,242.47 C1035.07,284.98 1091.86,333.71 1135.99,371.57 " fill="none" id="ControllerServiceImpl-&gt;ControllerContext" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1139.95,374.97,1135.7364,366.068,1136.1598,371.709,1130.5188,372.1323,1139.95,374.97" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[ae1eefc3e71f91398f29a86498c1e524]
reverse link House to Room--><path d="M2674.94,181.43 C2666.2,214.86 2653.2,266.12 2643.5,311 C2635.89,346.23 2628.59,387.42 2624.33,412.47 " fill="none" id="House&lt;-Room" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="2678.29,168.69,2672.8977,173.4778,2675.2432,180.2968,2680.6355,175.509,2678.29,168.69" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="51" x="2644.5" y="325.897">contains</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="7" x="2669.0446" y="190.2282">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="20" x="2602.6718" y="400.7194">1..*</text><!--MD5=[826e7a83381a338f12de91adbd02bba2]
reverse link Room to Device--><path d="M2597.57,471.83 C2581.16,496.83 2560.87,528.71 2554.5,543 C2545.22,563.81 2538.43,588.96 2534.29,606.85 " fill="none" id="Room&lt;-Device" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="2604.78,460.91,2598.1338,463.7078,2598.1602,470.9189,2604.8064,468.1211,2604.78,460.91" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="51" x="2555.5" y="557.897">contains</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="7" x="2593.3354" y="482.4991">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="20" x="2512.8898" y="595.0672">0..*</text><!--MD5=[a0152eb9651d4e402ef8016dd3058222]
reverse link House to Occupant--><path d="M2689.97,181.86 C2699.98,254.47 2718.66,422.41 2700.5,562 C2698.53,577.14 2694.19,593.7 2690.27,606.7 " fill="none" id="House&lt;-Occupant" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#FFFFFF" points="2688.09,168.65,2684.9737,175.153,2689.7778,180.5307,2692.8941,174.0277,2688.09,168.65" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="55" x="2709.5" y="441.897">residents</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="7" x="2681.1119" y="190.5915">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="20" x="2669.6986" y="595.2825">0..*</text><!--MD5=[fb5d18e9fb19f6187996b17622090b98]
link Room to Occupant--><path d="M2615.28,460.92 C2610.66,486.67 2606.48,528.8 2619.5,562 C2626.31,579.38 2639.89,594.97 2652.7,606.83 " fill="none" id="Room-Occupant" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="75" x="2620.5" y="557.897">occupied_by</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="20" x="2616.3854" y="482.5114">0..*</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="20" x="2622.0038" y="595.0418">0..*</text><!--MD5=[0d34d3c2503d4e3fc366f09f8f8cda19]
link SetStatusCommand to AddressPath--><path d="M555.5,513.03 C555.5,541.04 555.5,571.5 555.5,594.32 " fill="none" id="SetStatusCommand-&gt;AddressPath" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="555.5,599.36,559.5,590.36,555.5,594.36,551.5,590.36,555.5,599.36" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[4d67f34b8ac19d2ffde466d5fb41239d]
@startuml
skinparam classAttributeIconSize 0
class ControllerService {
  +start()
  +stop()
  +getLog(): String
}
interface DeviceEventListener {
  +onStatusChange(Device, String, String, String)
}
class ControllerServiceImpl {
  -model: HousemateModelService
  -kg: KnowledgeGraphService
  -invoker: CommandInvoker
  -log: List<String>
  -beerPromptPendingRooms: Set<String>
  +start()
  +stop()
  +getLog(): String
  +onStatusChange(...)
  -handleAvaCommand(...)
  -handleCameraEvent(...)
  -handleFire(house)
  -handleOven(...)
  -handleRefrigerator(...)
  -bumpThermostat(house, room, delta)
}
ControllerServiceImpl ..|> ControllerService
ControllerServiceImpl ..|> DeviceEventListener

interface Action {
  +execute()
  +describe(): String
}
class CommandInvoker {
  -controller: ControllerServiceImpl
  +run(a: Action)
  +runAll(list: List<Action>)
}
class SetStatusCommand {
  -model: HousemateModelService
  -auth: String
  -path: AddressPath
  -key: String
  -value: String
  +execute()
  +describe(): String
}
class RoomBroadcastCommand {
  -model: HousemateModelService
  -auth,house,room,deviceType,key,value: String
  +execute()
  +describe(): String
}
class HouseBroadcastCommand {
  -model: HousemateModelService
  -auth,house,deviceType,key,value: String
  +execute()
  +describe(): String
}
class SpeakCommand {
  -controller: ControllerServiceImpl
  -house,room,text: String
  +execute()
  +describe(): String
}
class ExternalCallCommand {
  -controller: ControllerServiceImpl
  -kind,payload: String
  +execute()
  +describe(): String
}

CommandInvoker - -> Action
SetStatusCommand ..|> Action
RoomBroadcastCommand ..|> Action
HouseBroadcastCommand ..|> Action
SpeakCommand ..|> Action
ExternalCallCommand ..|> Action
ControllerServiceImpl - -> CommandInvoker
ControllerServiceImpl - -> HousemateModelService
ControllerServiceImpl - -> KnowledgeGraphService
ControllerServiceImpl - -> ControllerContext

class House
class Room
class Device
class Occupant
class AddressPath {
  +toString(): String
}
class ControllerContext {
  -model: HousemateModelService
  -auth: String
  +devicesOfTypeInRoom(house,room,type)
  +anyOccupantsInRoom(house,room)
  +getOccupantLocation(name)
}

House "1" *- - "1..*" Room : contains
Room  "1" *- - "0..*" Device : contains
House "1" o- - "0..*" Occupant : residents
Room  "0..*" - - "0..*" Occupant : occupied_by
SetStatusCommand - -> AddressPath
@enduml

PlantUML version 1.2020.02(Sun Mar 01 02:22:07 PST 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 21.0.7+6-LTS
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg>